(this["webpackJsonpblackjack-game"]=this["webpackJsonpblackjack-game"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(3),c=a.n(r),l=(a(12),a(4)),u=a(5),i=a(7),d=a(6),o=(a(13),a(0)),h=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={deck:[],dealer:null,player:null,wallet:0,inputValue:"",currentBet:null,gameOver:!1,message:null},n}return Object(u.a)(a,[{key:"generateDeck",value:function(){for(var e=[2,3,4,5,6,7,8,9,10,"J","Q","K","A"],t=["\u2666","\u2663","\u2665","\u2660"],a=[],n=0;n<e.length;n++)for(var s=0;s<t.length;s++)a.push({number:e[n],suit:t[s]});return a}},{key:"dealCards",value:function(e){var t=this.getRandomCard(e),a=this.getRandomCard(t.updatedDeck),n=this.getRandomCard(a.updatedDeck),s=[t.randomCard,n.randomCard],r=[a.randomCard,{}],c={cards:s,count:this.getCount(s)},l={cards:r,count:this.getCount(r)};return{updatedDeck:n.updatedDeck,player:c,dealer:l}}},{key:"startNewGame",value:function(e){if("continue"===e)if(this.state.wallet>0){var t=this.state.deck.length<10?this.generateDeck():this.state.deck,a=this.dealCards(t),n=a.updatedDeck,s=a.player,r=a.dealer;this.setState({deck:n,dealer:r,player:s,currentBet:null,gameOver:!1,message:null})}else this.setState({message:"Game over! You are broke! Please start a new game."});else{var c=this.generateDeck(),l=this.dealCards(c),u=l.updatedDeck,i=l.player,d=l.dealer;this.setState({deck:u,dealer:d,player:i,wallet:100,inputValue:"",currentBet:null,gameOver:!1,message:null})}}},{key:"getRandomCard",value:function(e){var t=e,a=Math.floor(Math.random()*t.length),n=t[a];return t.splice(a,1),{randomCard:n,updatedDeck:t}}},{key:"placeBet",value:function(){var e=this.state.inputValue;if(e>this.state.wallet)this.setState({message:"Insufficient funds to bet that amount."});else if(e%1!==0)this.setState({message:"Please bet whole numbers only."});else{var t=this.state.wallet-e;this.setState({wallet:t,inputValue:"",currentBet:e})}}},{key:"hit",value:function(){if(this.state.gameOver)this.setState({message:"Game over! Please start a new game."});else if(this.state.currentBet){var e=this.getRandomCard(this.state.deck),t=e.randomCard,a=e.updatedDeck,n=this.state.player;n.cards.push(t),n.count=this.getCount(n.cards),n.count>21?this.setState({player:n,gameOver:!0,message:"BUST!"}):this.setState({deck:a,player:n})}else this.setState({message:"Please place bet."})}},{key:"dealerDraw",value:function(e,t){var a=this.getRandomCard(t),n=a.randomCard,s=a.updatedDeck;return e.cards.push(n),e.count=this.getCount(e.cards),{dealer:e,updatedDeck:s}}},{key:"getCount",value:function(e){var t=[];return e.forEach((function(e){"A"===e.number?t.push(e):e.number&&t.unshift(e)})),t.reduce((function(e,t){return"J"===t.number||"Q"===t.number||"K"===t.number?e+10:"A"===t.number?e+11<=21?e+11:e+1:e+t.number}),0)}},{key:"stand",value:function(){if(this.state.gameOver)this.setState({message:"Game over! Please start a new game."});else{var e=this.getRandomCard(this.state.deck),t=e.updatedDeck,a=this.state.dealer;for(a.cards.pop(),a.cards.push(e.randomCard),a.count=this.getCount(a.cards);a.count<17;){var n=this.dealerDraw(a,t);a=n.dealer,t=n.updatedDeck}if(a.count>21)this.setState({deck:t,dealer:a,wallet:this.state.wallet+2*this.state.currentBet,gameOver:!0,message:"Dealer bust! You win!"});else{var s,r=this.getWinner(a,this.state.player),c=this.state.wallet;"dealer"===r?s="Dealer wins...":"player"===r?(c+=2*this.state.currentBet,s="You win!"):(c+=this.state.currentBet,s="Push."),this.setState({deck:t,dealer:a,wallet:c,gameOver:!0,message:s})}}}},{key:"getWinner",value:function(e,t){return e.count>t.count?"dealer":e.count<t.count?"player":"push"}},{key:"inputChange",value:function(e){var t=+e.target.value;this.setState({inputValue:t})}},{key:"handleKeyDown",value:function(e){console.log(e.keyCode),13===e.keyCode&&this.placeBet()}},{key:"componentWillMount",value:function(){this.startNewGame(),document.querySelector("body").addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"render",value:function(){var e=this,t=this.state.dealer.cards[0].number;return this.state.dealer.cards[1].number?this.state.dealer.count:"J"===t||"Q"===t||"K"===t?10:"A"===t?11:t,Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"buttons",children:[Object(o.jsx)("button",{onClick:function(){e.startNewGame()},children:"New Game"}),Object(o.jsx)("button",{onClick:function(){e.hit()},children:"Hit"}),Object(o.jsx)("button",{onClick:function(){e.stand()},children:"Stand"})]}),Object(o.jsxs)("p",{children:["Wallet: $",this.state.wallet]}),this.state.currentBet?null:Object(o.jsxs)("div",{className:"input-bet",children:[Object(o.jsx)("form",{children:Object(o.jsx)("input",{type:"text",name:"bet",placeholder:"",value:this.state.inputValue,onChange:this.inputChange.bind(this)})}),Object(o.jsx)("button",{onClick:function(){e.placeBet()},children:"Place Bet"})]}),this.state.gameOver?Object(o.jsx)("div",{className:"buttons",children:Object(o.jsx)("button",{onClick:function(){e.startNewGame("continue")},children:"Continue"})}):null,Object(o.jsxs)("p",{children:["Player 1 (",this.state.player.count,")"]}),Object(o.jsx)("table",{className:"cards",children:Object(o.jsx)("tr",{children:this.state.player.cards.map((function(e,t){return Object(o.jsx)(m,{number:e.number,suit:e.suit},t)}))})}),Object(o.jsxs)("p",{children:["Dealer's Hand (",this.state.dealer.count,")"]}),Object(o.jsx)("table",{className:"cards",children:Object(o.jsx)("tr",{children:this.state.dealer.cards.map((function(e,t){return Object(o.jsx)(m,{number:e.number,suit:e.suit},t)}))})}),Object(o.jsx)("p",{children:this.state.message})]})}}]),a}(s.a.Component),m=function(e){var t=e.number,a=e.suit,n=t?"".concat(t).concat(a):null,s="\u2666"===a||"\u2665"===a?"card-red":"card";return Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:s,children:n})})},b=h,p=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(b,{})}),document.getElementById("root")),p()}},[[15,1,2]]]);
//# sourceMappingURL=main.577c12d6.chunk.js.map